{"version":3,"sources":["mailer/userNew.service.js"],"names":["send","req","user","Mailer","from","templates","defaultTemplate","resolve","__dirname","transportOptions","auth","pass","host","port","secure","fullUrl","headers","activeToken","console","log","to","email","subject","template","messageData","title","name","message","action","copymark"],"mappings":";;;;;QAIgBA,I,GAAAA,I;;AAJhB;;;;AACA;;;;AACA;;;;;;AAEO,SAASA,IAAT,CAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC9B;AACA,MAAIC,SAAS,oBAAe;AAC1BC,UAAM,wBADoB;AAE1BC,eAAW;AACTC,uBAAiB,eAAKC,OAAL,CAAaC,SAAb,EAAwB,6BAAxB;AADR,KAFe;AAK1BC,sBAAkB;AAChBC,YAAM;AACJR,cAAM,wBADF,EAC4B;AAChCS,cAAM,aAFF,CAEgB;AAFhB,OADU;AAKhBC,YAAM,gBALU;AAMhBC,YAAM,GANU;AAOhBC,cAAQ,IAPQ;AALQ,GAAf,CAAb;;AAgBA,MAAIC,UAAUd,IAAIe,OAAJ,CAAY,QAAZ,IAAwB,qBAAxB,GAAgDd,KAAKe,WAAnE;AACAC,UAAQC,GAAR,CAAY,WAAZ,EAAyBJ,OAAzB;AACAG,UAAQC,GAAR,CAAY,QAAZ;AACAhB,SAAOH,IAAP,CAAY;AACVoB,QAAIlB,KAAKmB,KADC;AAEVC,aAAS,iBAFC;AAGVC,cAAU,iBAHA;AAIVC,iBAAa;AACXC,aAAO,SAASvB,KAAKmB,KADV;AAEXK,YAAMxB,KAAKmB,KAFA;AAGXM,eAAS,gBAHE;AAIXC,cAAQb,OAJG;AAKXc,gBAAU;AALC;AAJH,GAAZ;AAYD","file":"userNew.service.js","sourcesContent":["import Templation from './templates/index';\nimport path from 'path';\nimport config from '../config/environment';\n\nexport function send(req, user) {\n  //Create our new new mailer object\n  var Mailer = new Templation({\n    from: 'pelommedrado@gmail.com',\n    templates: {\n      defaultTemplate: path.resolve(__dirname, './templates/nova-conta.html')\n    },\n    transportOptions: {\n      auth: {\n        user: 'pelommedrado@gmail.com', // Basta dizer qual o nosso usuário\n        pass: 'soad87wwpl,' // e a senha da nossa conta\n      },\n      host: 'smtp.gmail.com',\n      port: 465,\n      secure: true, // use SSL\n    }\n  });\n\n  var fullUrl = req.headers['origin'] + '/signupvalid?token=' + user.activeToken;\n  console.log('URL full ', fullUrl);\n  console.log('config', config);\n  Mailer.send({\n    to: user.email,\n    subject: 'Seja Bem-vindo!',\n    template: 'defaultTemplate',\n    messageData: {\n      title: 'Olá ' + user.email,\n      name: user.email,\n      message: 'Seja bem-vindo',\n      action: fullUrl,\n      copymark: '(c) TooCool LLC 1995'\n    }\n  });\n}\n"]}