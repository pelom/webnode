<div class="container">
  <div class="row">
    <h3 class="page-header">
      <i class="fa fa-rocket" aria-hidden="true"></i>
      Permissões - Perfis
    </h3>

    <div class="panel panel-default" ng-hide="vm.conta">
      <div class="panel-heading">
        <h3 class="panel-title">
          Informe o Perfil matrix e o Nome para criar um novo perfil</h3>
      </div>

      <form class="form" name="formProfile" ng-submit="vm.register(formProfile)" novalidate>

        <ul class="list-group no-margin-bottom">
          <li class="list-group-item no-border">
            <div class="row">
              <div class="col-xs-6">
                <dl>
                  <dt><small>Nome do perfil</small></dt>
                  <dd ng-class="{'has-error': profileNome.nome.$invalid && profileNome.nome.$dirty}">
                    <input type="text" name="profileNome" class="form-control" placeholder="Nome perfil"
                     ng-model="ctl.profileNome" ng-required="true" ng-minlength="3" ng-maxlength="30"
                      nomevalido="false" />

                    <p class="help-block"
                      ng-show="formProfile.profileNome.$error.required && form1.nome.$dirty">
                      O sobrenome é necessário</p>
                    <p class="help-block" ng-show="formProfile.profileNome.$error.minlength">
                      São necessários no minimo 3 letras</p>
                    <p class="help-block" ng-show="formProfile.profileNome.$error.maxlength">
                      São permitidos no máximo 30 letras</p>
                  </dd>
                </dl>
              </div>
              <div class="col-xs-6">
                <dl>
                  <dt><small>Perfil matrix</small></dt>
                  <dd>
                    <select class="form-control" ng-model="ctl.profileMaster"
                       ng-options="item._id as item.nome for item in ctl.appList()"
                      ng-change="ctl.changeProfileMaster(ctl.profileMaster)">
                        <option ng-if="!ctl.profileMaster" value="">-- Nenhum --</option>
                      </select>
                </dl>
              </div>
            </div>
          </li>
        </ul>

        <ul class="list-group no-margin-bottom">
          <li class="list-group-item no-border">
            <h5>Nome da aplicação</h5>
          </li>
        </ul>
      </form>
    </div>

  <div class="panel panel-default">

      <div class="panel-heading">
        <div class="row">
          <div class="col-xs-6">
            <div class="btn-group">
              <a class="btn btn-default" ng-click="ctl.openAppModal(-1)">
                <i class="fa fa-plus" aria-hidden="true"></i> Novo</a>
              <!--a class="btn btn-default"><span> Edit</span></a>
              <a class="btn btn-default"><span>Delete</span></a-->
            </div>
          </div>
          <div class="col-xs-6 pull-right form-group">
            <div class="input-group">
              <div class="input-group-addon"><i class="fa fa-search"></i></div>
              <input type="text" class="form-control" placeholder="Filtrar resultados"
               ng-model="filtrarResult">
            </div>
          </div>
        </div>
      </div>

      <div class="table-responsive">
        <table class="table table-hover">

          <thead>
            <tr class="active">
              <!--th style="width:100px">Actions</th-->
              <th>
                <a href="#" ui-sref-active="active"
                  ng-click="sortType = 'nome'; sortReverse = !sortReverse">
                  <strong>Nome<strong>
                  <div class="pull-right">
                    <span ng-show="sortType == 'nome' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'nome' && sortReverse" class="fa fa-caret-up"></span>
                  </div>
                </a>
              </th>
              <th>
                <a href="#" ui-sref-active="active"
                  ng-click="sortType = 'descricao'; sortReverse = !sortReverse">
                  <strong>Descrição<strong>

                  <div class="pull-right">
                    <span ng-show="sortType == 'descricao' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'descricao' && sortReverse" class="fa fa-caret-up"></span>
                  </div>
                </a>
              </th>
              <th>
                <a href="#" ui-sref-active="active"
                  ng-click="sortType = 'isAtivo'; sortReverse = !sortReverse">
                  <strong>Situação</strong>
                  <div class="pull-right">
                    <span ng-show="sortType == 'isAtivo' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'isAtivo' && sortReverse" class="fa fa-caret-up"></span>
                  </div>
                </a>
              </th>
              <!--th>
                <a href="#" ui-sref-active="active"
                  ng-click="sortType = 'createdAt'; sortReverse = !sortReverse">
                  <strong>Criado</strong>
                  <div class="pull-right">
                    <span ng-show="sortType == 'createdAt' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'createdAt' && sortReverse" class="fa fa-caret-up"></span>
                  </div>
                </a>
              </th-->
              <th>
                <a href="#" ui-sref-active="active"
                  ng-click="sortType = 'updatedAt'; sortReverse = !sortReverse">
                  <strong>Modificador</strong>
                  <div class="pull-right">
                    <span ng-show="sortType == 'updatedAt' && !sortReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortType == 'updatedAt' && sortReverse" class="fa fa-caret-up"></span>
                  </div>
                </a>
              </th>
            </tr>
          </thead>

          <tbody>
            <tr ng-repeat="ap in ctl.appList() | orderBy:sortType:sortReverse | filter:filtrarResult"
              ng-click="ctl.openAppModal($index)" uib-tooltip="Clique para abrir">
              <!--td>
                <button type="button" class="btn btn-xs btn-default">
                  <span class="glyphicon glyphicon-pencil"></span>
                </button>
                <button type="button" data-bind="click: $parent.remove" class="remove-news btn btn-xs btn-default" data-toggle="tooltip" data-placement="top" data-original-title="Delete">
                  <span class="glyphicon glyphicon-trash"></span>
                </button>
                <button type="button" class="enabledisable-news btn btn-xs btn-default">
                  <span class="glyphicon glyphicon-ok"></span>
                </button>
              </td-->
              <td><a class="btn btn-link" ui-sref-active="active">{{ ap.nome }}</a></td>
              <td><small>{{ ap.descricao}}</small></td>
              <td>
                <small ng-if="ap.isAtivo === 'true'">
                <span class="label label-success">Ativo</span></small>
              <small ng-if="ap.isAtivo === 'false'">
                <span class="label label-danger">Desativo</span></small>
              </td>
              <!--td><small>{{ ap.createdAt | date:'dd/MM/yyyy HH:mm' }} por
                <strong>{{ ap.criador.nome}} {{ap.criador.sobrenome}}</strong></small></td-->
              <td>
                <small>{{ ap.updatedAt | date:'dd/MM/yyyy HH:mm' }} por
                  <strong>{{ap.modificador.nome}} {{ap.modificador.sobrenome}}</strong></small>
                <!--ul class="list-unstyled">
                  <li ng-repeat="mod in ap.modulos" >
                    <span class="label label-default">{{ mod.nome }}</span>

                  </li>
                </ul-->
                <!--strong ng-repeat="mod in ap.modulos">
                c
                <br/>
              </strong-->
                <!--span class="label label-primary">create</span>
                <span class="label label-success">Success</span>
                <span class="label label-info">Info</span>
                <span class="label label-warning">Warning</span>
                <span class="label label-danger">Danger</span-->
              </td>
            </tr>
          </tbody>

        </table>

      </div>
    </div>
  </div>
</div>
<hr>
